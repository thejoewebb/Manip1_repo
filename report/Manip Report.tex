\documentclass[11pt, oneside]{article}   	% use "amsart" instead of "article" for AMSLaTeX format
\usepackage[a4paper, total={7in, 9in}, margin=0.5in]{geometry}                		% See geometry.pdf to learn the layout options. There are lots.
\geometry{letterpaper}                   		% ... or a4paper or a5paper or ... 
%\geometry{landscape}                		% Activate for for rotated page geometry
\usepackage[parfill]{parskip}    		% Activate to begin paragraphs with an empty line rather than an indent
\usepackage{graphicx}				% Use pdf, png, jpg, or epsÂ§ with pdflatex; use eps in DVI mode
								% TeX will automatically convert eps --> pdf in pdflatex	
\graphicspath{ {./images/} }

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{subfig}
\usepackage{floatrow}
% Table float box with bottom caption, box width adjusted to content
\newfloatcommand{capbtabbox}{table}[][\FBwidth]
\usepackage{float}
%\usepackage{caption}
%\usepackage{subcaption}
\usepackage{nicefrac}
\usepackage{mathtools}
\usepackage{amssymb}

    
%\setcounter{section}{2}

\title{MANIP Lab report (M1 CORO/JEMARO)}
\author{Joseph Webb\quad - \quad Thursday 17 November 2022}
\date{}							% Activate to display a given date or no date

\begin{document}

\maketitle
\section{Modified DH-Tables}

\subsection{Turret Robot}

$r_1 = 0.5, \quad r_2 = 0.1$


\begin{figure}[H]
\begin{floatrow}
\ffigbox{%
  %\rule{3cm}{3cm}%
%}
%{%
\includegraphics[scale = 0.25]{Turret}
}{%
  \caption{schematic of turret robot with intermediary frames}%
}
\capbtabbox{%
  \begin{tabular}{ | c | c  c  c  c |}
\hline
 Joint & a & $\alpha$ & $\theta$ & r \\ 
 \hline
 1 & 0 & 0 &  $q_1$ & b \\ 
 
 2 & 0 & $\nicefrac{\pi}{2}$ & $q_2$ & 0 \\
 
 3 & 0 & $-\nicefrac{\pi}{2}$ & 0 & $ q_3 + d$ \\
 \hline
 e & 0 & 0 & 0 & 0 \\
 \hline

\end{tabular}
}{%
  \caption{Modified DH-table for turret bot}%
}
\end{floatrow}
\end{figure}

\pagebreak

\subsection{KR-16 Robot (KUKA)}

$r_1 = 0.675, \quad r_2 = 0.26, \quad r_3 = 0.68, \quad r_4 = 0.035, \quad r_5 = 0.67, \quad r_e = 0.158$

\begin{figure}[H]
\begin{floatrow}
\ffigbox{%
  %\rule{3cm}{3cm}%
%}
%{%
\includegraphics[scale = 0.18]{Kuka}
}{%
  \caption{schematic of KUKA with intermediary frames}%
}
\capbtabbox{%
  \begin{tabular}{ | c | c  c  c  c |}
\hline
 Joint & a & $\alpha$ & $\theta$ & r \\ 
 \hline
 1 & 0 & $\pi$ &  $q_1$ & $-r_1$ \\ 
 
 2 & $r_2$ & $\nicefrac{\pi}{2}$ & $q_2$ & 0 \\
 
 3 & $r_3$ & 0 & $q_3 + \nicefrac{\pi}{2}$ & 0 \\
 
 4 & $r_4$ & $-\nicefrac{\pi}{2}$ & $q_4$ & $-r_5$\\ 
 
 5 & 0 & $\nicefrac{\pi}{2}$ & $q_5$ & 0\\
 
 6 & 0 & $-\nicefrac{\pi}{2}$ & $q_6$ & 0\\
 \hline
 e & 0 & $\pi$ & 0 & $r_e$ \\
 \hline

\end{tabular}
}{%
  \caption{Modified DH-table for KUKA}%
}
\end{floatrow}
\end{figure}

\subsection{UR-10 Robot}

$r_1 = 0.1273, \quad r_2 = 0.612, \quad r_3 = 0.5723, \quad r_4 = 0.1639, \quad r_5 = 0.1157, \quad r_e = 0.1922$

\begin{figure}[H]
\begin{floatrow}
\ffigbox{%
  %\rule{3cm}{3cm}%
%}
%{%
\includegraphics[scale = 0.22]{UR10}
}{%
  \caption{schematic of UR10 with intermediary frames}%
}
\capbtabbox{%
  \begin{tabular}{ | c | c  c  c  c |}
\hline
 Joint & a & $\alpha$ & $\theta$ & r \\ 
 \hline
 1 & 0 & 0 &  $q_1$ & $r_1$ \\ 
 
 2 & 0 & $-\nicefrac{\pi}{2}$ & $q_2$ & 0 \\
 
 3 & $r_2$ & 0 & $q_3$ & 0 \\
 
 4 & $r_3$ & 0 & $q_4$ & $r_4$\\ 
 
 5 & 0 & $-\nicefrac{\pi}{2}$ & $q_5$ & $r_5$\\
 
 6 & 0 & $\nicefrac{\pi}{2}$ & $q_6$ & 0\\
 \hline
 e & 0 & 0 & $\pi$ & $r_e$ \\
 \hline

\end{tabular}
}{%
  \caption{Modified DH-table for UR-10}%
}
\end{floatrow}
\end{figure}

\section{Inverse Geometric Models}

\subsection{Turret Robot}

\begin{equation*}
^fM_w= 
\begin{pmatrix}
c_1 c_2 & -s1 & -s2 c1 & (-q_3 - r_2) s_2  c_1 \\
s_1 c_2& c_1 & -s_1 s_2& (-q_3 - r_2) s_1 s_2 \\
s_2  & 0  & c_2 & r_1 + (q_3 + r_2) c_2  \\
0 & 0 & 0 & 1\\
\end{pmatrix}
=
\begin{pmatrix}
x_x& x_y & x_z & t_x \\
y_x& y_y & y_z & t_y\\
z_x  & z_y  & z_z & t_z  \\
0 & 0 & 0 & 1\\
\end{pmatrix}
\end{equation*}

\subsection{KR-16 Robot (KUKA)}

\begin{equation*}
^{f}t_w = 
\begin{pmatrix}
(a_2 + a_3 c_2 - a_4 s_{23} + r_4 c_{23}) c_1 \\
(-a_2 -a_3 c_2 + a_4 s_{23} -r_4 c_{23}) s_1 \\
-a_3 s_2 - a_4 c_{23} + r_1 - r_4 s_{23}   \\
 1\\
\end{pmatrix}
=
\begin{pmatrix}
t_x\\
t_y\\
t_z\\
1\\
\end{pmatrix}
\end{equation*}

\begin{equation*}
P^* = {}^fM_e^* = {}^fM_w{}^wM_e
\end{equation*}

using ${}^ft_w$:

\begin{equation}
q_1 = \text{solveType2}(t_x,t_y,0)
\end{equation}
\begin{equation}
q_2,q_{23} = \text{solveType7}(0,-a_3,(r_1 - t_z) , (a_2 - \nicefrac{t_x}{c_1}), a_4, r_4)
\end{equation}
\begin{equation}
q_3 = q_{23} - q_2
\end{equation}

we can compute:

\begin{equation*}
^{0}R_3 = 
\begin{pmatrix}
-s_{23} c_1 & -c_1 c_23 & s_1 \\
s_1 s_23 & s_1 c_23 & c_1 \\
-c_23 & s_23 & 0 \\
\end{pmatrix}
\quad \text{and} \quad{}^3R_6 = {}^0R_3^{-1}{}^fR_w = 
\begin{pmatrix}
x_x' & y_x' & z_x'\\
x_y' & y_y' & z_y'\\
x_z' & y_z' & z_z'\\
\end{pmatrix}
\end{equation*}

\begin{equation}
q_5 = \text{solveType2}(0,1,z_y')
\end{equation}

\begin{equation}
q_4 = \text{solveType3}(0,-s_5,z_x',s_5,0,z_z')
\end{equation}

\begin{equation}
q_6 = \text{solveType2}(0,s_5,x_y')
\end{equation}




\end{document}  